.modal-overlay { 
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.45);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    padding: 20px;
}
.modal-overlay.notification {
    z-index: 3000;
}

.modal-content { 
    background-color: var(--white); 
    padding: 30px; 
    border-radius: var(--border-radius); 
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); 
    max-width: var(--modal-width); 
    width: 100%; 
    position: relative; 
    max-height: 90vh; 
    animation: popIn 0.25s ease-out;
}
.modal-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 1rem; 
    padding-left: 24px;
    padding-right: 24px;
}
.modal-header h2, .modal-header h3 { margin: 0; flex-grow: 1; text-align: center;}
.modal-close { 
    position: absolute; 
    top: 15px; 
    right: 15px; 
    color: var(--dark-gray); 
}
.modal-close:hover { color: var(--text-color); }
.modal-footer { display: flex; justify-content: flex-end; gap: 0.75rem; padding-top: 1.5rem; margin-top: 1rem; border-top: 1px solid var(--border-color); }
.modal-content.modal-flex-col { display: flex; flex-direction: column; }
.modal-body-scrollable { overflow-y: auto; flex-grow: 1; min-height: 0; padding-right: 5px; margin-right: -5px;}
.modal-body { min-height: 300px; }


/* --- Modern Notification Modal --- */
.notification-modal.modern {
    background: #ffffff;
    border-radius: 16px;
    padding: 30px 25px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 16px 40px rgba(0, 0, 0, 0.15);
    text-align: center;
}
.notification-modal.modern .modal-body { min-height: auto; }
.icon-circle { width: 56px; height: 56px; margin: 0 auto 16px; border-radius: 50%; background-color: var(--icon-bg, #eee); display: flex; align-items: center; justify-content: center; }
.modal-icon { font-size: 24px; color: var(--icon-color, #444); }
.modal-title { font-size: 20px; font-weight: 600; margin-bottom: 10px; color: #1e1e1e; }
.modal-message { font-size: 15px; color: #4b4b4b; margin-bottom: 24px; }
.modal-buttons { display: flex; justify-content: center; gap: 12px; }
.modal-buttons .btn { margin: 0; }

.success .icon-circle { --icon-bg: #e6f9ed; --icon-color: #34c759; }
.error .icon-circle { --icon-bg: #fdeeee; --icon-color: #ff3b30; }
.confirm .icon-circle { --icon-bg: #f0f4ff; --icon-color: #007aff; }
.info .icon-circle { --icon-bg: #eaf3fc; --icon-color: #17a2b8; }


/* --- Toast Notification Styles --- */
.toast-notification {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 2000;
    background-color: var(--white);
    padding: 12px 20px;
    border-radius: var(--border-radius);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    gap: 15px;
    border-left: 5px solid;
    min-width: 320px;
    animation: slide-in 0.3s ease-out;
}
@keyframes slide-in {
    from { top: -100px; opacity: 0; }
    to { top: 20px; opacity: 1; }
}
.toast-notification.success { border-color: var(--success-color); }
.toast-notification.error { border-color: var(--danger-color); }
.toast-notification.info { border-color: var(--primary-color); }
.toast-icon { font-size: 20px; }
.toast-notification.success .toast-icon { color: var(--success-color); }
.toast-notification.error .toast-icon { color: var(--danger-color); }
.toast-notification.info .toast-icon { color: var(--primary-color); }
.toast-content { display: flex; flex-direction: column; gap: 2px; }
.toast-title { font-weight: 600; }
.toast-message { font-size: 12pt; color: var(--text-color-light); }
.toast-close-btn { background: none; border: none; cursor: pointer; margin-left: auto; color: var(--dark-gray); padding: 5px; }
@keyframes popIn {
    0% { transform: scale(0.9); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}


/* Add Method & Scan Modals */
.add-method-modal-body,
.scanner-modal-content .modal-body {
    min-height: auto;
}
.add-method-modal-body {
    text-align: center;
    padding: 10px;
}
.add-method-modal-body > p { color: var(--text-color-light); margin: 10px 0 25px 0; font-size: 13pt; }
.add-method-options { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.add-method-option { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; padding: 25px 20px; border: 1px solid var(--border-color); border-radius: var(--border-radius); background-color: var(--white); cursor: pointer; transition: all 0.2s ease-in-out; text-align: center; position: relative; font-family: inherit; }
.add-method-option:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08); border-color: var(--primary-color); }
.add-method-option .option-icon { font-size: 28px; color: var(--primary-color); }
.add-method-option .option-title { font-size: 14pt; font-weight: 600; color: var(--text-color); line-height: 1.2; }
.add-method-option .option-subtitle { font-size: 11pt; color: var(--text-color-light); line-height: 1.4; }
.scanner-modal-content { padding: 0; display: flex; flex-direction: column; width: 90vw; max-width: 450px; height: 70vh; max-height: 600px; }
.scanner-modal-content .modal-header { padding: 15px 20px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; }
.scanner-body { flex-grow: 1; display: flex; align-items: center; justify-content: center; background-color: #000; position: relative; overflow: hidden; }
.scanner-video-feed { width: 100%; height: 100%; object-fit: cover; }
.scanner-status { padding: 40px; text-align: center; color: var(--text-color); background-color: var(--white); width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; }
.scanner-status.error { color: var(--danger-color); }
.scanner-status .svg-inline--fa { font-size: 24px; margin-bottom: 15px; }
.scanner-status p { font-size: 12pt; color: var(--text-color-light); }
.scanner-footer { padding: 20px; display: flex; justify-content: center; align-items: center; background-color: var(--white); border-top: 1px solid var(--border-color); flex-shrink: 0; }
.btn-capture { width: 60px; height: 60px; border-radius: 50%; background-color: #f0f2f5; border: 3px solid var(--border-color); cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 4px; transition: transform 0.1s ease; }
.btn-capture:active:not(:disabled) { transform: scale(0.95); }
.btn-capture .capture-inner-circle { width: 100%; height: 100%; border-radius: 50%; background-color: var(--primary-color); box-shadow: 0 0 5px rgba(0,0,0,0.2); }
.btn-capture:disabled { cursor: not-allowed; background-color: var(--medium-gray); }
.btn-capture:disabled .capture-inner-circle { background-color: var(--dark-gray); }

@media (max-width: 768px) {
    .add-method-options { grid-template-columns: 1fr; gap: 15px; }
    .scanner-modal-content { width: 100%; height: 100%; max-width: none; max-height: none; border-radius: 0; }
}

/* --- NEW --- */
.modal-subtitle-with-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text-color);
}
.modal-subtitle-with-icon .svg-inline--fa {
    font-size: 1rem;
}